module ForemanTeamdynamix
  module HostsHelperExtensions
    extend ActiveSupport::Concern
    DEFAULT_ASSET_ATTRS = { 'Asset ID': 'ID', 'Owner': 'OwningCustomerName', 'Parent Asset': 'ParentID' }
  
    def td_tab_title
      SETTINGS[:team_dynamix][:title] || 'Team Dynamix'      
    end

    def asset_attrs
      asset_attrs = SETTINGS[:team_dynamix][:asset_attributes] || DEFAULT_ASSET_ATTRS
      
      asset_attrs.each do |key, value|
        host_attr_val = @asset[key]
        fields += [[_(key.to_s), host_attr_val]] if host_attr_val.present?
      end
      fields
    end
  end
end
